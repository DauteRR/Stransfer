(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(23)},19:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(7),a(10)),s=a(1),l=a(2),h=a(4),d=a(3),m=a(5),u=document.createElement("canvas");var g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).videoRef=r.a.createRef(),a.state={isRecording:!1,errorMessage:""},a.loadStream=function(e){a.state.isRecording||(!function(e,t){try{t.srcObject=e}catch(a){t.src=URL.createObjectURL(e)}}(e,a.getVideoElement()),a.setState({isRecording:!0,errorMessage:""}))},a.takePhoto=function(){return a.state.isRecording?function(e,t){var a=t.width,n=t.height;u.width=a,u.height=n;var r=u.getContext("2d");if(r)return r.drawImage(e,0,0,a,n),u.toDataURL()}(a.getVideoElement(),{width:a.getVideoElement().videoWidth,height:a.getVideoElement().videoHeight}):null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){return e.loadStream(t)}).catch(function(t){e.setState({isRecording:!1,errorMessage:"Access to camera not granted"})})}},{key:"getVideoElement",value:function(){var e=this.videoRef.current;if(!e)throw new Error("Video reference error");return e}},{key:"render",value:function(){return this.state.errorMessage?r.a.createElement("div",{className:this.props.className},r.a.createElement("p",null,this.state.errorMessage)):r.a.createElement("div",{className:this.props.className},r.a.createElement("video",{ref:this.videoRef,autoPlay:!0,role:"application","aria-label":"Camera"},'Cannot show the camera. Maybe it is because this browser doesn\'t support the HTML5 "video" element'))}}]),t}(n.Component),f=(a(19),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).canvasRef=r.a.createRef(),a.imageRef=r.a.createRef(),a.state={isImageLoaded:!1},a.onImageLoad=function(){var e=a.getCanvasElement().getContext("2d");e&&(e.drawImage(a.getImageElement(),0,0,a.props.width,a.props.height),a.setState({isImageLoaded:!0}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getImageElement",value:function(){var e=this.imageRef.current;if(!e)throw new Error("Image reference error");return e}},{key:"getCanvasElement",value:function(){var e=this.canvasRef.current;if(!e)throw new Error("Canvas reference error");return e}},{key:"getDownloadButton",value:function(){return this.state.isImageLoaded?r.a.createElement("a",{download:this.props.imageName,href:this.props.dataUrl},r.a.createElement("span",{className:"options__download-icon",title:"Download","aria-label":"Download"},"D")):r.a.createElement("p",null,'"'.concat(this.props.imageName,'"')," not available yet")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"DownloadableImage"},r.a.createElement("div",{className:"DownloadableImage__options"},r.a.createElement("button",{onClick:function(){return e.props.deleteImage(e.props.date)},className:"options__delete-button",title:"Delete","aria-label":"Delete"},"\xd7"),this.getDownloadButton()),r.a.createElement("canvas",{width:this.props.width,height:this.props.height,ref:this.canvasRef,hidden:!0}),r.a.createElement("img",{className:"DownloadableImage__image",src:this.props.dataUrl,alt:this.props.alt,width:this.props.width,height:this.props.height,onLoad:this.onImageLoad,ref:this.imageRef}))}}]),t}(n.Component)),p=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).createPhotoListItem=function(e,t){return r.a.createElement("li",{key:t,className:"result-container"},r.a.createElement(f,{dataUrl:e.dataUrl,width:e.width,height:e.height,alt:String(t),imageName:String(t),date:e.date,deleteImage:a.props.deleteImage}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"container result-list"},this.props.imageData.map(this.createPhotoListItem))}}]),t}(n.Component),v=a(9),w="image_data",b=a.n(v).a.open("StyleTransfer",1,function(e){e.createObjectStore(w,{keyPath:"date"})});var E=a(11),y={width:300,height:300};a(21);var j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).cameraRef=r.a.createRef(),a.state={imageData:[]},a.getCameraComponent=function(){var e=a.cameraRef.current;if(!e)throw new Error("Camera reference error");return e},a.onNewPhoto=function(){var e,t=a.getCameraComponent(),n=function(e){var t=Object(E.a)({},y);return e<1?t.width*=e:t.height/=e,t}(function(e){if(e.videoWidth>0&&e.videoHeight>0)return e.videoWidth/e.videoHeight;throw new Error("Invalid dimensions {videoWidth: ".concat(e.videoWidth,", videoHeight: ").concat(e.videoHeight,"}. They must be numbers greater than 0"))}(t.getVideoElement())),r={date:Date.now(),dataUrl:t.takePhoto(),width:n.width,height:n.height};e=r,b.then(function(t){return t.transaction(w,"readwrite").objectStore(w).put(e)}),a.setState(function(e){return{imageData:[].concat(Object(c.a)(e.imageData),[r])}})},a.deleteImage=function(e){a.setState(function(t){return t.imageData.splice(t.imageData.findIndex(function(t){return t.date===e}),1),{imageData:t.imageData}}),function(e){b.then(function(t){return t.transaction(w,"readwrite").objectStore(w).delete(e)})}(e)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.then(function(e){return e.transaction(w,"readonly").objectStore(w).getAll()}).then(function(t){return e.setState({imageData:t})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"App__camera-container"},r.a.createElement(g,{ref:this.cameraRef,className:"camera-container__camera"}),r.a.createElement("button",{onClick:this.onNewPhoto,className:"camera-container__button button","aria-label":"Take photo",title:"Take photo"})),r.a.createElement(p,{imageData:this.state.imageData,deleteImage:this.deleteImage}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,a){}},[[12,2,1]]]);
//# sourceMappingURL=main.4f6a7334.chunk.js.map